# RPI5-Autostart

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Raspberry Pi 5 –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ (k3s).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
RPI5-Autostart/
‚îú‚îÄ‚îÄ rpi-setup/          # –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ RPI5
‚îÇ   ‚îú‚îÄ‚îÄ run.sh          # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ steps/          # –®–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (01-06)
‚îî‚îÄ‚îÄ cluster/            # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s –∫–ª–∞—Å—Ç–µ—Ä–∞
    ‚îú‚îÄ‚îÄ run.sh          # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ steps/          # –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (10-12)
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–Ω–∞ –Ω–æ–≤–æ–π Raspberry Pi)

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
sudo apt update
sudo apt install -y git curl wget

# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd ~
git clone https://github.com/ilyamen/RPI5-Autostart.git
cd RPI5-Autostart

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
chmod +x rpi-setup/run.sh rpi-setup/steps/*.sh
chmod +x cluster/run.sh cluster/steps/*.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–∞–∑–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
sudo ~/RPI5-Autostart/rpi-setup/run.sh

# –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–ª–∞—Å—Ç–µ—Ä
sudo ~/RPI5-Autostart/cluster/run.sh
# –í—ã–±–µ—Ä–∏—Ç–µ: 1 –¥–ª—è master, 2 –¥–ª—è worker
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–¥–ª—è —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ)

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥ –∏–∑ GitHub
cd ~/RPI5-Autostart
git reset --hard origin/main
git pull

# –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
chmod +x rpi-setup/run.sh rpi-setup/steps/*.sh
chmod +x cluster/run.sh cluster/steps/*.sh

# –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É
sudo ~/RPI5-Autostart/rpi-setup/run.sh

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–ª–∞—Å—Ç–µ—Ä (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo ~/RPI5-Autostart/cluster/run.sh
```

---

### 1. –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ RPI5

**–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Å –Ω—É–∂–Ω–æ–≥–æ —à–∞–≥–∞):
```bash
cd rpi-setup
sudo ./run.sh
```

–°–∫—Ä–∏–ø—Ç:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Å–ª–µ–¥—É—é—â–∏–π –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π —à–∞–≥
- –ë—É–¥–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —à–∞–≥–æ–º
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ —Å–ø—Ä–æ—Å–∏—Ç –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö** (ZRAM —Ä–∞–∑–º–µ—Ä, —Å–µ—Ä–≤–∏—Å—ã, –ø—Ä–æ—Ñ–∏–ª—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
- –ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ Enter –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –ü–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —à–∞–≥–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É
- –ü–æ—Å–ª–µ reboot –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞: `sudo ./run.sh`

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s –∫–ª–∞—Å—Ç–µ—Ä–∞

**–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤**:
```bash
cd cluster
sudo ./run.sh
```

–ü–æ—è–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é:
```
==============================
  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s –∫–ª–∞—Å—Ç–µ—Ä–∞
==============================
1) master    - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å k3s server (–º–∞—Å—Ç–µ—Ä-–Ω–æ–¥–∞)
2) worker    - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å k3s agent (–≤–æ—Ä–∫–µ—Ä-–Ω–æ–¥–∞)
3) dashboard - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Kubernetes Dashboard
0) exit      - –≤—ã—Ö–æ–¥
==============================
–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ [1-3,0]:
```

**–î–ª—è –≤–æ—Ä–∫–µ—Ä–∞** —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç:
- `K3S_URL` (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://192.168.1.100:6443)
- `K3S_TOKEN` (–∏–∑ `/var/lib/rancher/k3s/server/node-token` –Ω–∞ –º–∞—Å—Ç–µ—Ä–µ)

## üìã –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### rpi-setup - –®–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

0. **00_system_config.sh** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ boot –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚ö° NEW!
   - GPU memory = 16MB (–º–∏–Ω–∏–º—É–º –¥–ª—è Pi OS Lite)
   - –í–∫–ª—é—á–µ–Ω–∏–µ cgroup memory –¥–ª—è k3s
   - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Bluetooth
   - **–¢–†–ï–ë–£–ï–¢ –ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ò** üîÑ

1. **01_prereq.sh** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ ARM64 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è NVMe –¥–∏—Å–∫–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —É—Ç–∏–ª–∏—Ç (htop, iotop, vim, bc –∏ –¥—Ä.)
   - –í–∫–ª—é—á–µ–Ω–∏–µ NTP —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ EEPROM** (–Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è RPI5)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã CPU

2. **02_nvme_partition.sh** - –†–∞–∑–º–µ—Ç–∫–∞ NVMe –¥–∏—Å–∫–∞
   - ‚ö†Ô∏è **–£–ù–ò–ß–¢–û–ñ–ê–ï–¢ –í–°–ï –î–ê–ù–ù–´–ï** –Ω–∞ `/dev/nvme0n1`
   - –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "YES"
   - –°–æ–∑–¥–∞–µ—Ç GPT —Ä–∞–∑–¥–µ–ª ext4

3. **03_clone_root.sh** - –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ SSD
   - –ö–æ–ø–∏—Ä—É–µ—Ç –∫–æ—Ä–Ω–µ–≤—É—é –§–° –Ω–∞ NVMe
   - –ò—Å–∫–ª—é—á–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

4. **04_switch_to_nvme.sh** - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Å NVMe
   - –û–±–Ω–æ–≤–ª—è–µ—Ç cmdline.txt –∏ fstab
   - **–¢–†–ï–ë–£–ï–¢ –ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ò** üîÑ
   - –ü–æ—Å–ª–µ reboot: `sudo ./run.sh`

5. **05_zram_swap.sh** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ZRAM swap ‚ö° UPDATED! üéÆ –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ô
   - **–í—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–ª–∏ –≤—Ä—É—á–Ω—É—é (MB/GB)
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è 8GB RPI5 = 4GB ZRAM
   - –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ: <2GB=50%, 2-4GB=100%, 4GB+=50% –æ—Ç RAM
   - –ê–ª–≥–æ—Ä–∏—Ç–º —Å–∂–∞—Ç–∏—è: zstd
   - Enter = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä

6. **06_sysctl_tuning.sh** - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —è–¥—Ä–∞ ‚ö° UPDATED! üéÆ –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ô
   - **–í—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è:** —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π
   - –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π: 25 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, conntrack=1M
   - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π: 35 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, conntrack=2M, TCP –±—É—Ñ–µ—Ä—ã 128MB
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π: 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–ª—è k3s
   - Enter = —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å

7. **07_disable_services.sh** - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ ‚ö° NEW! üéÆ –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ô
   - **–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π, –≤—ã–±–æ—Ä–æ—á–Ω—ã–π –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π: –æ—Ç–∫–ª—é—á–∞–µ—Ç Bluetooth, Avahi, ModemManager, Triggerhappy
   - –í—ã–±–æ—Ä–æ—á–Ω—ã–π: —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
   - Enter = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö

8. **08_monitoring.sh** - –ë–∞–∑–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã ‚ö° NEW!
   - –°–∫—Ä–∏–ø—Ç `rpi-monitor` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `/var/log/rpi-temperature.log`
   - –ê–ª–∏–∞—Å `monitor` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### cluster - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s

- **10_k3s_master.sh** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—Å—Ç–µ—Ä-–Ω–æ–¥—ã k3s ‚ö° UPDATED!
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è RPI5 8GB
  - –û—Ç–∫–ª—é—á–µ–Ω—ã traefik –∏ servicelb (–¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏)
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã eviction –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è memory
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω kubectl —Å –∞–ª–∏–∞—Å–æ–º 'k'
  - –í—ã–≤–æ–¥–∏—Ç node token –∏ K3S_URL –¥–ª—è –≤–æ—Ä–∫–µ—Ä–æ–≤
  
- **11_k3s_worker.sh** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä-–Ω–æ–¥—ã
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç k3s agent
  - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –∫–ª–∞—Å—Ç–µ—Ä—É
  
- **12_dashboard.sh** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Kubernetes Dashboard
  - Kubernetes Dashboard v2.7.0
  - –°–æ–∑–¥–∞–µ—Ç admin-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–æ—Å—Ç—É–ø—É

## üí° –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### rpi-setup/run.sh

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
sudo ./run.sh

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —à–∞–≥–∏ —Å –Ω–∞—á–∞–ª–∞
sudo ./run.sh all

# –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ
sudo ./run.sh --continue

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏
sudo ./run.sh 02 05

# –í—ã–ø–æ–ª–Ω–∏—Ç—å —à–∞–≥–∏ –Ω–∞—á–∏–Ω–∞—è —Å N
sudo ./run.sh --from 03
```

### cluster/run.sh

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
sudo ./run.sh

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
sudo ./run.sh master
sudo ./run.sh worker
sudo ./run.sh dashboard

# Worker —Å –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
K3S_URL=https://IP:6443 K3S_TOKEN=xxx sudo ./run.sh worker
```

## üìÅ –õ–æ–≥–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- **–õ–æ–≥–∏**: `/var/log/rpi-setup.log`
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ —à–∞–≥–æ–≤**: `/var/local/rpi-setup/*.ok`
- **–¢–µ–∫—É—â–∏–π —à–∞–≥**: `/var/local/rpi-setup/current_step`

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π** - –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤  
‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞** - –ø–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π  
‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** - –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ  
‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** - –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ—Å–ª–µ reboot  
‚úÖ **–ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ª–æ–≥  

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Raspberry Pi 5** —Å **8GB RAM** (ARM64)
- **NVMe SSD** –Ω–∞ `/dev/nvme0n1` (–º–∏–Ω–∏–º—É–º 32GB)
- **Raspberry Pi OS Lite** (64-bit, Debian-based)
- **Root –ø—Ä–∞–≤–∞** (sudo)
- **–ê–∫—Ç–∏–≤–Ω–æ–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏)

## üìñ –¢–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Å—Ç–µ—Ä-–Ω–æ–¥—ã

```bash
# 1. –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ RPI5
cd rpi-setup
sudo ./run.sh
# ... –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –∫–∞–∂–¥—ã–π —à–∞–≥ ...
# ... –ø–æ—Å–ª–µ —à–∞–≥–∞ 04 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç reboot ...

# 2. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
sudo ./run.sh
# ... –∑–∞–≤–µ—Ä—à–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —à–∞–≥–∏ ...

# 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º k3s –º–∞—Å—Ç–µ—Ä
cd ../cluster
sudo ./run.sh
# –í—ã–±–∏—Ä–∞–µ–º: 1) master

# 4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Dashboard
sudo ./run.sh
# –í—ã–±–∏—Ä–∞–µ–º: 3) dashboard
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–æ—Ä–∫–µ—Ä-–Ω–æ–¥—ã

```bash
# 1. –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ RPI5
cd rpi-setup
sudo ./run.sh
# ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –º–∞—Å—Ç–µ—Ä—É ...

# 2. –ü–æ–¥–∫–ª—é—á–∞–µ–º –∫ –∫–ª–∞—Å—Ç–µ—Ä—É
cd ../cluster
sudo ./run.sh
# –í—ã–±–∏—Ä–∞–µ–º: 2) worker
# –í–≤–æ–¥–∏–º K3S_URL: https://192.168.1.100:6443
# –í–≤–æ–¥–∏–º K3S_TOKEN: K10abc...xyz
```

## üîç Troubleshooting

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏**:
```bash
sudo tail -f /var/log/rpi-setup.log
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã**:
```bash
ls -la /var/local/rpi-setup/
```

**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –Ω—É–∂–Ω–æ–≥–æ —à–∞–≥–∞**:
```bash
sudo ./run.sh --from 05
```

**–°–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —à–∞–≥–∞**:
```bash
sudo rm /var/local/rpi-setup/03.ok
sudo ./run.sh 03
```

**–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è**:
```bash
sudo rm -rf /var/local/rpi-setup/*.ok
sudo ./run.sh all
```

**–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –¥–ª—è Dashboard**:
```bash
kubectl -n kubernetes-dashboard create token admin-user
```

**–û—Ç–∫—Ä—ã—Ç—å Dashboard**:
```bash
kubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard 8443:443
# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç—å: https://127.0.0.1:8443
```

## üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è RPI5 8GB, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–π:

- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus + Grafana stack
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: UFW firewall, fail2ban, SSH hardening
- üíæ **Storage**: Longhorn distributed storage, NFS provisioner
- üåê **Networking**: MetalLB LoadBalancer, Traefik Ingress, Cert-Manager
- üì¶ **GitOps**: ArgoCD –∏–ª–∏ Flux CD –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- üíø **Backup**: Velero –¥–ª—è backup –∫–ª–∞—Å—Ç–µ—Ä–∞

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ [IMPROVEMENTS.md](IMPROVEMENTS.md)

## üå°Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
monitor

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
tail -f /var/log/rpi-temperature.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ throttling
vcgencmd get_throttled
```

**–í–∞–∂–Ω–æ**: RPI5 –º–æ–∂–µ—Ç –Ω–∞–≥—Ä–µ–≤–∞—Ç—å—Å—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –†–∞–¥–∏–∞—Ç–æ—Ä —Å —Ç–µ—Ä–º–æ–ø—Ä–æ–∫–ª–∞–¥–∫–∞–º–∏
- –ê–∫—Ç–∏–≤–Ω–æ–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ (PWM –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä)
- –ö–æ—Ä–ø—É—Å —Å —Ö–æ—Ä–æ—à–µ–π –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–µ–π

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **üéÆ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã** - –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ Enter –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **EEPROM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** –≤ —à–∞–≥–µ 01 (–≤–∞–∂–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ RPI5)
- **ZRAM —Ä–∞–∑–º–µ—Ä –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–ª–∏ –≤—Ä—É—á–Ω—É—é (–¥–ª—è 8GB RPI5 = 4GB –∞–≤—Ç–æ)
- **–ü—Ä–æ—Ñ–∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π
- **–í—ã–±–æ—Ä —Å–µ—Ä–≤–∏—Å–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ –≤—ã–±–æ—Ä–æ—á–Ω–æ–µ
- –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∞—Å—Ç–µ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ node token - –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–æ—Ä–∫–µ—Ä–æ–≤
- Dashboard –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ port-forward (–ø–æ–∑–∂–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Ingress)
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—ç–∫–∞–ø—è—Ç—Å—è —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- Traefik –∏ ServiceLB –æ—Ç–∫–ª—é—á–µ–Ω—ã - –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è
- GPU memory —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ 16MB (–º–∏–Ω–∏–º—É–º –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **INTERACTIVE_FEATURES.md** - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- **SCRIPTS_AUDIT.md** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- **SCRIPTS_FINAL_REPORT.md** - –û—Ç—á–µ—Ç –æ–± —É–ª—É—á—à–µ–Ω–∏—è—Ö
- **IMPROVEMENTS.md** - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é
- **CHANGELOG.md** - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
